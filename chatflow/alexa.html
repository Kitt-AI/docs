

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Alexa Skill Tutorials &mdash; ChatFlow 0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="ChatFlow 0.1 documentation" href="index.html"/>
        <link rel="next" title="Advanced Alexa Skill Tutorial" href="alexa_advanced.html"/>
        <link rel="prev" title="Skype Bot Tutorials" href="skype.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            
              <a href="http://chatflow.kitt.ai" target="_blank" class="icon icon-home"> ChatFlow
            
          

          
            
            <img src="_static/chatflow-logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to ChatFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">ChatFlow Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="build_a_bot.html">ChatFlow Build A Bot Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogue_nodes.html">Dialogue Nodes</a></li>
<li class="toctree-l1"><a class="reference internal" href="debug.html">Debug ChatFlow</a></li>
<li class="toctree-l1"><a class="reference internal" href="extended_example.html">Extended Example: A Conversational Yelp Bot</a></li>
<li class="toctree-l1"><a class="reference internal" href="telegram.html">Telegram Bot Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="facebook.html">Facebook Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="slack.html">Slack Bot Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="twilio.html">Twilio Bot Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="kik.html">Kik Bot Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="skype.html">Skype Bot Tutorials</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Alexa Skill Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-copy-cat-echo-skill">Create a Copy Cat Echo skill</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#echo-bot-tutorial-video">Echo Bot Tutorial Video</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-an-alexa-copy-cat-chatflow-app">1. Create an Alexa Copy Cat Chatflow app</a></li>
<li class="toctree-l3"><a class="reference internal" href="#create-an-alexa-skill">2. Create an Alexa Skill</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#skill-information">Skill Information</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sample-utterances">Sample Utterances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ssl-certificate">SSL Certificate</a></li>
<li class="toctree-l4"><a class="reference internal" href="#test">Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finishing-up">Finishing up</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#alexa-in-and-out-nodes">Alexa In and Out Nodes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#alexa-in">Alexa In</a></li>
<li class="toctree-l3"><a class="reference internal" href="#alexa-out">Alexa Out</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#test-your-skill-with-an-echo">Test your skill with an Echo</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#launch-skill">1. Launch Skill</a></li>
<li class="toctree-l3"><a class="reference internal" href="#intent-request">2. Intent Request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#companion-app-card">Companion App Card</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reprompt">Reprompt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ask-or-tell">Ask or Tell?</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#more-advanced-tutorials">More Advanced Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="alexa_advanced.html">Advanced Alexa Skill Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="alexa_nlu.html">Advanced Alexa Skill NLU Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="alexa_show.html">Alexa Echo Show Skill Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="dueros.html">使用ChatFlow部署小度技能</a></li>
<li class="toctree-l1"><a class="reference internal" href="oauth2.html">OAuth2/Uber Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="line.html">Line Bot Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ChatFlow</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Alexa Skill Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          <a href="https://groups.google.com/a/kitt.ai/forum/#!forum/chat" class="fa fa-comments" style="color:#55507c" target="_blank"> Forum</a>
        
        
            
            <a href="_sources/alexa.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="alexa-skill-tutorials">
<span id="alexa"></span><h1><a class="toc-backref" href="#id7">Alexa Skill Tutorials</a><a class="headerlink" href="#alexa-skill-tutorials" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#alexa-skill-tutorials" id="id7">Alexa Skill Tutorials</a><ul>
<li><a class="reference internal" href="#introduction" id="id8">Introduction</a></li>
<li><a class="reference internal" href="#create-a-copy-cat-echo-skill" id="id9">Create a Copy Cat Echo skill</a><ul>
<li><a class="reference internal" href="#echo-bot-tutorial-video" id="id10">Echo Bot Tutorial Video</a></li>
<li><a class="reference internal" href="#create-an-alexa-copy-cat-chatflow-app" id="id11">1. Create an Alexa Copy Cat Chatflow app</a></li>
<li><a class="reference internal" href="#create-an-alexa-skill" id="id12">2. Create an Alexa Skill</a><ul>
<li><a class="reference internal" href="#skill-information" id="id13">Skill Information</a></li>
<li><a class="reference internal" href="#sample-utterances" id="id14">Sample Utterances</a></li>
<li><a class="reference internal" href="#configuration" id="id15">Configuration</a></li>
<li><a class="reference internal" href="#ssl-certificate" id="id16">SSL Certificate</a></li>
<li><a class="reference internal" href="#test" id="id17">Test</a></li>
<li><a class="reference internal" href="#finishing-up" id="id18">Finishing up</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#alexa-in-and-out-nodes" id="id19">Alexa In and Out Nodes</a><ul>
<li><a class="reference internal" href="#alexa-in" id="id20">Alexa In</a></li>
<li><a class="reference internal" href="#alexa-out" id="id21">Alexa Out</a></li>
</ul>
</li>
<li><a class="reference internal" href="#test-your-skill-with-an-echo" id="id22">Test your skill with an Echo</a><ul>
<li><a class="reference internal" href="#launch-skill" id="id23">1. Launch Skill</a></li>
<li><a class="reference internal" href="#intent-request" id="id24">2. Intent Request</a></li>
<li><a class="reference internal" href="#companion-app-card" id="id25">Companion App Card</a></li>
<li><a class="reference internal" href="#reprompt" id="id26">Reprompt</a></li>
<li><a class="reference internal" href="#ask-or-tell" id="id27">Ask or Tell?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#more-advanced-tutorials" id="id28">More Advanced Tutorials</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id8">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial, we will introduce how to configure a ChatFlow app to an Alexa
skill. We will also walkthrough a simple Alexa skill that repeats user input.</p>
<p>Here is an example of the skill in action:</p>
<video width="640" style="display:block; margin: 0 auto;" controls>
  <source src="_static/img/alexa/AlexaEchoDemo.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<br> <br> <br><p>By the end of this tutorial, you will be able to:</p>
<ul class="simple">
<li>Create an Alexa skill through the Amazon developer console</li>
<li>Create an Alexa Chatflow application</li>
<li>Understand structures of the <strong>Alexa In</strong> and <strong>Alexa Out</strong> nodes</li>
<li>Display help card on the Alexa companion app on your smart phone</li>
</ul>
</div>
<div class="section" id="create-a-copy-cat-echo-skill">
<span id="copy-cat-skill"></span><h2><a class="toc-backref" href="#id9">Create a Copy Cat Echo skill</a><a class="headerlink" href="#create-a-copy-cat-echo-skill" title="Permalink to this headline">¶</a></h2>
<div class="section" id="echo-bot-tutorial-video">
<span id="echo-bot-video-walkthrough"></span><h3><a class="toc-backref" href="#id10">Echo Bot Tutorial Video</a><a class="headerlink" href="#echo-bot-tutorial-video" title="Permalink to this headline">¶</a></h3>
<iframe width="640" height="360" src="https://www.youtube.com/embed/gJchjcdQPnU"
    frameborder="0" allowfullscreen></iframe>
<br> <br> <br><div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The Copy Cat demo uses <code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code> for a truly open-vocabulary
speech recognition experience. However, starting <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interaction-model-reference#literal-slot-type-reference">November 16, 2016</a>,
Amazon will not <em>certify</em> skills that use <code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code> (but they still work as your
own demo skills).</p>
</div>
</div>
<div class="section" id="create-an-alexa-copy-cat-chatflow-app">
<h3><a class="toc-backref" href="#id11">1. Create an Alexa Copy Cat Chatflow app</a><a class="headerlink" href="#create-an-alexa-copy-cat-chatflow-app" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Go to <a class="reference external" href="https://chatflow.kitt.ai/">ChatFlow</a> and create a new application using the sample application
“Alexa Copy Cat Skill”:</li>
</ol>
<img alt="_images/chatflow-copy-cat-app.png" class="align-center" src="_images/chatflow-copy-cat-app.png" />
<p>This app listens on incoming message sent from your Echo device through the
<strong>Alexa In</strong> node and replies it with the <strong>Alexa Out</strong> node.</p>
<ol class="arabic simple" start="2">
<li>Deploy this app to register a webhook callback address through the
<strong>Alexa In</strong> node:</li>
</ol>
<img alt="_images/alexa-in-node.png" class="align-center" src="_images/alexa-in-node.png" />
<ol class="arabic simple" start="3">
<li>Copy the “Final URL” onto your clipboard. It will be used later in Step
<a class="reference internal" href="#alexa-config"><span class="std std-ref">Configuration</span></a>.</li>
</ol>
<p>Now let’s go to the Amazon developer console and register an Alexa skill there.</p>
</div>
<div class="section" id="create-an-alexa-skill">
<span id="id1"></span><h3><a class="toc-backref" href="#id12">2. Create an Alexa Skill</a><a class="headerlink" href="#create-an-alexa-skill" title="Permalink to this headline">¶</a></h3>
<p>We want to create a skill that repeats what user says. For those who have worked
with an Alexa skill, you already know by default Alexa only gives you the intent
type and slots, but not the whole utterances. So the trick here is to use the
<code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code> slot type to make the whole utterance a slot.</p>
<ol class="arabic simple">
<li>Log in to Amazon <a class="reference external" href="https://developer.amazon.com">developer console</a>
and click “ALEXA” to get started with the <strong>Alexa Skills Kit</strong>:</li>
</ol>
<img alt="_images/alexa-get-started.png" class="align-center" src="_images/alexa-get-started.png" />
<div class="section" id="skill-information">
<span id="id2"></span><h4><a class="toc-backref" href="#id13">Skill Information</a><a class="headerlink" href="#skill-information" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="2">
<li>In <strong>Skill Information</strong>, pick a skill name and invocation name:</li>
</ol>
<img alt="_images/skill-info.png" class="align-center" src="_images/skill-info.png" />
<ol class="arabic simple" start="3">
<li>In <strong>Interaction Model</strong>, input the following <strong>Intent Schema</strong>:</li>
</ol>
<div class="highlight-javascript"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;intents&quot;</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
       <span class="s2">&quot;intent&quot;</span><span class="o">:</span> <span class="s2">&quot;SuperIntent&quot;</span><span class="p">,</span>
       <span class="s2">&quot;slots&quot;</span><span class="o">:</span> <span class="p">[</span>
          <span class="p">{</span>
             <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
             <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;AMAZON.LITERAL&quot;</span>
          <span class="p">}</span>
       <span class="p">]</span>
    <span class="p">}</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>Here for the <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interaction-model-reference">Interaction Model</a>,
we use the <code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code> to force Alexa to perform <em>open vocabulary</em> speech
recognition, while everything will be tagged as a single <code class="docutils literal"><span class="pre">SuperIntent</span></code>.</p>
</div>
<div class="section" id="sample-utterances">
<span id="id3"></span><h4><a class="toc-backref" href="#id14">Sample Utterances</a><a class="headerlink" href="#sample-utterances" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="4">
<li>In <strong>Sample Utterances</strong>, enter these two lines:</li>
</ol>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">SuperIntent</span> <span class="p">{</span><span class="nx">z</span><span class="o">|</span><span class="nx">Text</span><span class="p">}</span>
<span class="nx">SuperIntent</span> <span class="p">{</span><span class="nx">z</span> <span class="nx">z</span><span class="o">|</span><span class="nx">Text</span><span class="p">}</span>
</pre></div>
</div>
<p>We use <code class="docutils literal"><span class="pre">z</span></code> and <code class="docutils literal"><span class="pre">z</span> <span class="pre">z</span></code> here to enable both <em>single-word</em> and <em>multi-word</em> recognition.</p>
<img alt="_images/interaction-model.png" class="align-center" src="_images/interaction-model.png" />
</div>
<div class="section" id="configuration">
<span id="alexa-config"></span><h4><a class="toc-backref" href="#id15">Configuration</a><a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="5">
<li>Paste the “Final URL” from <strong>Alexa In</strong> node and choose the <strong>North America</strong> region:</li>
</ol>
<img alt="_images/skill-config.png" class="align-center" src="_images/skill-config.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code> slot is only supported in US English,
but not UK English or German (<a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interaction-model-reference#literal-slot-type-reference">source</a>).
So please only select <strong>North America</strong> here. For migrating <code class="docutils literal"><span class="pre">AMAZON.LITERAL</span></code>,
check out the <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/migrating-to-the-improved-built-in-and-custom-slot-types#replacing-literal-with-custom-slot-types">migration guide</a> to custom slots.</p>
</div>
</div>
<div class="section" id="ssl-certificate">
<h4><a class="toc-backref" href="#id16">SSL Certificate</a><a class="headerlink" href="#ssl-certificate" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="6">
<li>Select the wildcard SSL certificate option (the second option):</li>
</ol>
<img alt="_images/skill-ssl.png" class="align-center" src="_images/skill-ssl.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">KITT.AI uses a wildcard SSL certificat.</p>
</div>
</div>
<div class="section" id="test">
<h4><a class="toc-backref" href="#id17">Test</a><a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Amazon provides a Voice &amp; Service simulator before a skill is actually deployed.
It is a great tool to help check and understand skill input and output.</p>
</div>
<ol class="arabic simple" start="7">
<li>Test your application before deployment. Simply input “hello there” to
inspect the output from your Chatflow app</li>
</ol>
<img alt="_images/skill-test.png" class="align-center" src="_images/skill-test.png" />
</div>
<div class="section" id="finishing-up">
<h4><a class="toc-backref" href="#id18">Finishing up</a><a class="headerlink" href="#finishing-up" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple" start="8">
<li>Fill in the forms from <strong>Publishing Information</strong> and <strong>Privacy &amp; Compliance*</strong>.</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><em>Do not</em> click “Submit for Certification”.</p>
</div>
<ol class="arabic simple" start="9">
<li>Open up your Alexa companion app from cellphone. Under “Your skills”, you should
see your Copy Cat skill.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unpublished skills are only available to you!</p>
</div>
<a class="reference internal image-reference" href="_images/skill-on-app.png"><img alt="_images/skill-on-app.png" class="align-center" src="_images/skill-on-app.png" style="width: 320px;" /></a>
</div>
</div>
</div>
<div class="section" id="alexa-in-and-out-nodes">
<span id="alexa-nodes"></span><h2><a class="toc-backref" href="#id19">Alexa In and Out Nodes</a><a class="headerlink" href="#alexa-in-and-out-nodes" title="Permalink to this headline">¶</a></h2>
<p>This section of the tutorial provides insight into message structures of the
<strong>Alexa In</strong> and <strong>Alexa Out</strong> nodes</p>
<div class="section" id="alexa-in">
<span id="id4"></span><h3><a class="toc-backref" href="#id20">Alexa In</a><a class="headerlink" href="#alexa-in" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Alexa In</strong> node wraps an external request in <code class="docutils literal"><span class="pre">msg.alexa</span></code>, which follows
the Alexa <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#request-format">Request Format</a>.</p>
<p>There are three types of requests:</p>
<ol class="arabic simple">
<li><a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#launchrequest">LaunchRequest</a>:
when you say “<em>Alexa, open &lt;skill invocation name&gt;</em>”. At this time, Alexa should
play a welcome message or provide usage instructions. <code class="docutils literal"><span class="pre">msg.kitt._skill_launched</span></code>
is set to <code class="docutils literal"><span class="pre">true</span></code>.</li>
<li><a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#intentrequest">IntentRequest</a>:
when you engage with a skill in a session. The very first message in this session
has <code class="docutils literal"><span class="pre">msg.alexa.session.new</span> <span class="pre">=</span> <span class="pre">true</span></code>. The rest has it <code class="docutils literal"><span class="pre">false</span></code>. <code class="docutils literal"><span class="pre">msg.kitt._session_started</span></code>
reflects this.</li>
<li><a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#sessionendedrequest">SessionEndedRequest</a>:
when you explicitly asks Alexa to exit from session, such as by saying “<em>exit</em>”.
<code class="docutils literal"><span class="pre">msg.kitt._session_ended</span></code> is set to <code class="docutils literal"><span class="pre">true</span></code>.</li>
</ol>
<p>Additionally, <code class="docutils literal"><span class="pre">msg.kitt</span></code> also automatically sets:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">msg.kitt._session_id</span></code> from <code class="docutils literal"><span class="pre">msg.alexa.session.sessionId</span></code>, used by the Router.</li>
<li><code class="docutils literal"><span class="pre">msg.kitt._user_id</span></code> from <code class="docutils literal"><span class="pre">msg.alexa.session.user.userId</span></code>, used by the Router.</li>
<li><code class="docutils literal"><span class="pre">msg.kitt._timeout</span></code> (by default 30 seconds), used by the Router.</li>
<li><code class="docutils literal"><span class="pre">msg.kitt._access_token</span></code> from <code class="docutils literal"><span class="pre">msg.alexa.session.user.accessToken</span></code> if it appears.</li>
</ul>
</div></blockquote>
<p>It’s the remote access token if user has enabled <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/linking-an-alexa-user-with-a-user-in-your-system">account linking</a>.</p>
<p>We will discuss <code class="docutils literal"><span class="pre">msg.NLU</span></code> in <a class="reference internal" href="#intent-request"><span class="std std-ref">2. Intent Request</span></a> and outgoing message
structures in <a class="reference internal" href="#card-reprompt"><span class="std std-ref">Companion App Card</span></a>.</p>
</div>
<div class="section" id="alexa-out">
<span id="id5"></span><h3><a class="toc-backref" href="#id21">Alexa Out</a><a class="headerlink" href="#alexa-out" title="Permalink to this headline">¶</a></h3>
<p>The <strong>Alexa Out</strong> node sends a response back to the Alexa skill that called
<strong>Alexa In</strong> node or <strong>Alexa NLU</strong> node.</p>
<p>The response format follows <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#ResponseFormat">Amazon’s specification</a>.</p>
<p>The <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#response-format">response</a>
has the following properties:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">version</span></code> (string): the same as version in Alexa In request, otherwise 1.0</li>
<li><code class="docutils literal"><span class="pre">sessionAttributes</span></code> (object): set from <code class="docutils literal"><span class="pre">msg.kitt</span></code> to persist across sessions.</li>
<li><code class="docutils literal"><span class="pre">response.outputSpeech</span></code> <em>optional</em> (object): {type: “PlainText”, text: msg.payload}. However, if available, <code class="docutils literal"><span class="pre">msg.alexa.outputSpeech</span></code> is assigned to <code class="docutils literal"><span class="pre">response.outputSpeech</span></code> – this is helpful if users want to have SSML output.</li>
<li><code class="docutils literal"><span class="pre">response.card</span></code> <em>optional</em> (object): set from <code class="docutils literal"><span class="pre">msg.alexa.card</span></code> if availalbe to hold a Card Object. More information can be found <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#card-object">on the Card Object</a>.</li>
<li><code class="docutils literal"><span class="pre">response.reprompt</span></code> <em>optional</em> (object): set from <code class="docutils literal"><span class="pre">msg.alexa.reprompt</span></code> if availalbe to hold a Reprompt Object. More information can be found <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#reprompt-object">on the Reprompt Object Page</a>.</li>
<li><code class="docutils literal"><span class="pre">shouldEndSession</span></code> (boolean): true if session is ended, then your skill will close and not expect further user input.</li>
</ul>
</div>
</div>
<div class="section" id="test-your-skill-with-an-echo">
<span id="test-yout-skill"></span><h2><a class="toc-backref" href="#id22">Test your skill with an Echo</a><a class="headerlink" href="#test-your-skill-with-an-echo" title="Permalink to this headline">¶</a></h2>
<p>Now let’s use a real Echo device to test the Copy Cat app.</p>
<div class="section" id="launch-skill">
<h3><a class="toc-backref" href="#id23">1. Launch Skill</a><a class="headerlink" href="#launch-skill" title="Permalink to this headline">¶</a></h3>
<p><em>You: “Alexa, open Copy Cat.”</em></p>
<p><em>Echo: “Welcome. This is an Alexa Echo skill.”</em></p>
<p>When a user explicitly launches a skill, <code class="docutils literal"><span class="pre">msg.kitt_skill_launched</span></code> is set to
<code class="docutils literal"><span class="pre">true</span></code>, which is handled by the following enter node:</p>
<img alt="_images/launch-skill.png" class="align-center" src="_images/launch-skill.png" />
</div>
<div class="section" id="intent-request">
<span id="id6"></span><h3><a class="toc-backref" href="#id24">2. Intent Request</a><a class="headerlink" href="#intent-request" title="Permalink to this headline">¶</a></h3>
<p><em>You: “Alexa, ask Copy Cat to repeat what I said.”</em></p>
<p><em>Echo: “I heard repeat what I said.”</em></p>
<p><em>In companion Alexa app: a card shows up.</em></p>
<p>When user says <em>“ask Copy Cat to repeat what I said”</em>, the utterance
<em>repeat what I said</em> is matched against <a class="reference internal" href="#sample-utterances"><span class="std std-ref">Sample Utterances</span></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">SuperIntent</span> <span class="p">{</span><span class="nx">z</span><span class="o">|</span><span class="nx">Text</span><span class="p">}</span>
<span class="nx">SuperIntent</span> <span class="p">{</span><span class="nx">z</span> <span class="nx">z</span><span class="o">|</span><span class="nx">Text</span><span class="p">}</span>
</pre></div>
</div>
<p>Then <code class="docutils literal"><span class="pre">msg.alexa.request</span></code> will have the following <code class="docutils literal"><span class="pre">intent</span></code> property:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="s2">&quot;intent&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;SuperIntent&quot;</span><span class="p">,</span>
    <span class="s2">&quot;slots&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;Text&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Text&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="o">:</span> <span class="s2">&quot;repeat what I said&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here we capture the whole utterance. By default the <strong>Alexa In</strong> node sets
this utterance from <code class="docutils literal"><span class="pre">msg.alexa.request.intent.slots.Text.value</span></code> to <code class="docutils literal"><span class="pre">msg.payload</span></code>:</p>
<img alt="_images/alexa-in-node.png" class="align-center" src="_images/alexa-in-node.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can specify your own if you use a different Intent Schema.</p>
</div>
<p>Then when new utterances come, the <strong>On Intent</strong> enter node handles them
ultimately echoing back the utterances:</p>
<img alt="_images/on-intent.png" class="align-center" src="_images/on-intent.png" />
<p>The <strong>Repeat User</strong> state node defines how the outgoing messages look like:</p>
<img alt="_images/repeat-user.png" class="align-center" src="_images/repeat-user.png" />
<p>The final output from <strong>Alexa Out</strong> would follow the <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#response-format">Alexa Response Format</a>.</p>
</div>
<div class="section" id="companion-app-card">
<span id="card-reprompt"></span><h3><a class="toc-backref" href="#id25">Companion App Card</a><a class="headerlink" href="#companion-app-card" title="Permalink to this headline">¶</a></h3>
<p>Continuing on from the pervious step, your Echo will reply with:</p>
<p><em>Echo: “I heard repeat what I said.”</em></p>
<p>In addition, the companion app will show a card.</p>
<p>This is achieved by setting <code class="docutils literal"><span class="pre">msg.alexa.card</span></code>. <code class="docutils literal"><span class="pre">msg.alexa.card</span></code> follows the
format of <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#card-object">Card Object</a></p>
</div>
<div class="section" id="reprompt">
<h3><a class="toc-backref" href="#id26">Reprompt</a><a class="headerlink" href="#reprompt" title="Permalink to this headline">¶</a></h3>
<p>If you do not respond, Alexa will reprompt you with:</p>
<p><em>“You gotta say it S-L-O-W-L-Y slowly.”</em></p>
<p>This is achieved by setting <code class="docutils literal"><span class="pre">msg.alexa.reprompt</span></code>. <code class="docutils literal"><span class="pre">msg.alexa.reprompt</span></code>
follows the format of <a class="reference external" href="https://developer.amazon.com/public/solutions/alexa/alexa-skills-kit/docs/alexa-skills-kit-interface-reference#reprompt-object">Reprompt Object</a>.</p>
</div>
<div class="section" id="ask-or-tell">
<h3><a class="toc-backref" href="#id27">Ask or Tell?</a><a class="headerlink" href="#ask-or-tell" title="Permalink to this headline">¶</a></h3>
<p>If you want the current session to end, then specify in a state node:</p>
<p><code class="docutils literal"><span class="pre">msg.kitt._session_ended</span> <span class="pre">=</span> <span class="pre">true;</span></code></p>
<p>Alexa would end current session without expecting another user input.</p>
<p>Otherwise, Alexa would be waiting for user input, and reprompt user if no user
input is given.</p>
</div>
</div>
<div class="section" id="more-advanced-tutorials">
<h2><a class="toc-backref" href="#id28">More Advanced Tutorials</a><a class="headerlink" href="#more-advanced-tutorials" title="Permalink to this headline">¶</a></h2>
<p>So far we have created an “Echo” skill called Copy Cat by forcing Alexa output
the utterance <em>verbatim</em>. However, we did not deal with <em>understanding</em> the
sentence at all. There are two ways to go from here:</p>
<p>The first opition is to simply plug in a KITT.AI NLU node to handle NLU ourselves:</p>
<img alt="_images/alexa-kitt-nlu.png" class="align-center" src="_images/alexa-kitt-nlu.png" />
<p>However, we do not recommend this way because Alexa’s speech output might not be
perfect. Instead we suggest that you use Alexa’s own NLU with its language model
smoothed out with in-domain utterances. We have created a more advanced
tutorial <a class="reference internal" href="alexa_advanced.html#alexa-advanced"><span class="std std-ref">next</span></a> to demonstrate how this is done.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="alexa_advanced.html" class="btn btn-neutral float-right" title="Advanced Alexa Skill Tutorial" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="skype.html" class="btn btn-neutral" title="Skype Bot Tutorials" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p  style="color:#999;">
        &copy; Copyright 2016, KITT.AI.
      Last updated on Dec 07, 2017.

    </p>
  </div> 

  <div>

    <p>
      Made with <i class="fa fa-heart" style="color:red;"></i> in the city of
      <i class="fa fa-coffee" style="color:#6F4E37;"></i>
      <i class="fa fa-umbrella" style="color:#007FFF;"></i>
      <i class="fa fa-plane" style="color:#0F52BA;"></i>
      <i class="fa fa-diamond" style="color:#50C878;"></i>
    </p>
  </div>

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/js/anchor.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>